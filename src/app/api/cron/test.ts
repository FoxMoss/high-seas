import Airtable from 'airtable'

const base = new Airtable({
  apiKey:
    'patnc1XBRTrZUHq3D.e9f99a6cfbd061f4579ea521a5f4a01f24be6ee0a001b82a5c124c00aa92f0b1',
  endpointUrl: 'https://middleman.hackclub.com/airtable',
}).base('appTeNFYcUiYfGcR6')

const fetchedHsRecs = await base('people')
  .select({
    fields: [
      'identifier',
      'ships',
      'slack_id',
      'first_name',
      'last_name',
      'autonumber',
      'email',
      'full_name',
      'battles',
      'orders',
      'github_username',
      'settled_tickets',
      'help_requests',
      'shop_true',
      'academy_completed',
      'user_has_graduated',
      'preexisting_user',
      'address',
      'doubloons_paid',
      'doubloons_spent',
      'doubloons_balance',
      'doubloons_granted',
      'created_at',
      'doubloon_grants',
      'vote_balance',
      'shipped_ship_count',
      'vote_count',
      'ships_awaiting_vote_requirement_count',
      'ships_with_vote_requirement_met_count',
      'votes_expended',
      'minimum_pending_vote_requirement',
      'vote_balance_minus_minimum_pending_requirement',
      'YSWS Verification User',
      'verification_status',
      'votes_remaining_for_next_pending_ship',
      'votes_required_for_all_pending_ships',
      'votes_remaining_for_all_pending_ships',
      'unique_vote_count',
      'duplicate_vote_count',
      'unique_vote_explanation_count',
      'duplicate_vote_explanation_count',
      'battles__uniqueness_enforcement_string',
      'agggregated_battle_explanations',
      'record_id',
      'aggregated_battle_explanations_length',
      'battles__explanation',
      'aggregate_discordance',
      'voting_trust_factor_sans_clickthrough',
      'mean_discordance',
      'eligible_to_vote',
      'verification_alum',
      'waka_last_synced_from_db',
      'waka_last_heartbeat',
      'waka_known_machine_count',
      'waka_known_machines',
      'waka_30_day_active_machine_count',
      'waka_30_day_active_machines',
      'waka_known_installation_count',
      'waka_known_installations',
      'waka_30_day_active_installation_count',
      'waka_30_day_active_installations',
      'waka_first_heartbeat',
      'zapier_loops_marked_signed_up_at',
      'zapier_loops_marked_wakatime_installed_at',
      'waka_total_hours_logged',
      'waka_30_day_hours_logged',
      'magic_auth_link',
      'arrpheus_ready_to_invite',
      'arrpheus_slack_invite_failed',
      'arrpheus_slack_invite_fail_reason',
      'slack_email_is_duplicate',
      'ysws_submission',
      'all_battle_ship_autonumbers',
      'all_battle_ship_autonumbers_unique',
      'all_battle_ship_autonumber_strings',
      'orders__items',
      'magic_auth_message',
      'orders_awaiting_mailout',
      'orders__item_name',
      'verified_eligible',
      'all_order_items',
      'stage',
      'staged_ships_count',
      'hakatime_installed',
      'hakatime_has_coded',
      'last_activity_time',
      'tutorial_ship_count',
      'hours_since_last_activity',
      'days_since_last_activity',
      'mean_rating_difference',
      'mean_absolute_rating_difference',
      'accordance_coefficient',
      'consensus_violation_coefficient',
      'paid_out_ship_count',
      'order_count_no_free_stickers',
      'mean_vote_time',
      'all_orders_string',
      'sniffable_vote_count',
      'average_ship_rating',
      'duplicate_vote_explanation_percentage',
      'total_vote_count',
      'country',
      'contest',
      'verification_updated_at',
      'duplicate_vote_explanation_count_prior_week',
      'mean_consensus_disagreement',
      'consensus_disagreement_coefficient',
      'time_trust_factor',
      'consensus_violation_trust_factor',
      'total_ships',
      'vote_count_prior_week',
      'duplicate_explanation_trust_factor',
      'accordance_coefficient_trust_factor',
      'curse_blessing_status',
      'vote_quality_multiplier',
      'aggregated_rating_differences',
      'last_step_completed',
      'total_real_money_we_spent',
      'referral_link',
      'impersonation_link',
      'dollars_paid',
      'contest__doubloons_per_dollar',
      'contest__all_slack_ids',
      'referral_credit_count',
      'amount_earned_vs_fulfillment_cost',
      'auto_num',
      'winner_demo_opened_percentage',
      'telemetry_vote_count',
      'loser_demo_opened_percentage',
      'loser_readme_opened_percentage',
      'winner_readme_opened_percentage',
      'winner_repo_opened_percentage',
      'loser_repo_opened_percentage',
      'demo_opened_percentage',
      'readme_opened_percentage',
      'repo_opened_percentage',
      'Fraud - Wonderdome Reports',
      'count_battles_exact_mention',
      'battles_exact_mention_percentage',
      'slack_profile_url',
      'all_project_repo_urls',
      'all_project_demo_urls',
      'average_doubloons_per_hour',
      'daily_hours_logged',
      'days_since_first_heartbeat',
      'total_hours_shipped',
      'daily_hours_shipped',
      'days_between_first_and_last_heartbeats',
      'first_heartbeat_modified_at',
      'days_since_joining',
      'clickthrough_trust_factor',
      'voting_trust_factor',
      'orders__item_name_list',
      'dollars_fulfilled',
      'show_in_leaderboard',
      'doubloons_received',
      "didn't_complete_tutorial_bc_of_bug",
      'stuck_in_tutorial_generally',
    ],
    filterByFormula: "{full_name} = 'B en D'",
    maxRecords: 10,
  })
  .all()

console.log(fetchedHsRecs[0].fields)

Bun.write('toarnsteonsrt.json', fetchedHsRecs)
